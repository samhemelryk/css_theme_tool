YUI.add("moodle-block_css_theme_tool-csseditor-settings",function(e,t){var n=e.Node.create,r=function(e){r.superclass.constructor.apply(this,arguments)};r.prototype={themetool:null,content:null,shown:!1,initializer:function(e){this.themetool=e.cssthemetool,this.init_overlay(),this.init_generate_content(),e.el.on("click",this.show,this),this.show(e.e)},init_overlay:function(){var t=e.one(document.body),n=t.get("winHeight");this.overlay=new e.Overlay({bodyContent:"temp",width:"80%",height:Math.floor(n*.8),visible:!1,zIndex:500,id:"settings-overlay"}),this.overlay.render(t),e.one("#settings-overlay").addClass("css-theme-tool-overlay").setStyle("position","fixed").setStyle("margin",Math.floor(n*.1)+"px 10%"),e.on("windowresize",function(n){var r=t.get("winHeight");this.overlay.set("height",Math.floor(r*.8)),e.one("#settings-overlay").setStyle("marginTop",Math.floor(r*.1))}),this.overlay.bodyNode.addClass("css_builder_overlay")},init_generate_content:function(){var e=n('<div class="settingscontainer"><h2>Settings</h2></div>'),t=n('<input type="button" value="'+M.str.block_css_theme_tool.purgerules+'" />'),r=n('<div class="settingbox"></div>');r.append(t),r.append(n('<div class="settingdescription">'+M.str.block_css_theme_tool.purgerulesdesc+"</div>")),e.append(r);var i=n('<input type="button" value="'+M.str.block_css_theme_tool.exportcss+'" />'),s=n('<div class="settingbox"></div>');s.append(i),s.append(n('<div class="settingdescription">'+M.str.block_css_theme_tool.exportcssdesc+"</div>")),e.append(s);var o=n('<input type="checkbox" value="'+M.str.block_css_theme_tool.showadvancedbodytags+'" />'),u=n('<div class="settingbox"></div>');u.append(o),u.append(n('<div class="settingdescription">'+M.str.block_css_theme_tool.showadvancedbodytagsdesc+"</div>")),e.append(u),this.themetool.cfg.showadvancedbodytags&&o.set("checked",!0);var a=n('<input type="checkbox" value="'+M.str.block_css_theme_tool.autosaveonchange+'" />'),f=n('<div class="settingbox"></div>');f.append(a),f.append(n('<div class="settingdescription">'+M.str.block_css_theme_tool.autosaveonchangedesc+"</div>")),e.append(f),this.themetool.cfg.autosaveonchange&&a.set("checked",!0);var l=n('<input type="checkbox" value="'+M.str.block_css_theme_tool.onlyviewmyrules+'" />'),c=n('<div class="settingbox"></div>');c.append(l),c.append(n('<div class="settingdescription">'+M.str.block_css_theme_tool.onlyviewmyrulesdesc+"</div>")),e.append(c),this.themetool.cfg.onlyviewmyrules&&l.set("checked",!0);var h=n('<div class="overlaycontrols"></div>'),p=n('<input type="button" value="'+M.str.block_css_theme_tool.close+'" />');h.append(p),e.append(h),t.on("click",this.themetool.purge_rules,this.themetool),i.on("click",this.themetool.export_css,this.themetool),o.on("click",this.toggle_showadvancedbodytags,this,o),a.on("click",this.toggle_autosaveonchange,this,a),l.on("click",this.toggle_onlyviewmyrules,this,l),p.on("click",this.hide,this),this.content=e},show:function(){this.themetool.hide_components(),this.overlay.set("bodyContent",this.content),this.overlay.show(),this.shown=!0},hide:function(){this.shown&&(this.overlay.hide(),this.shown=!1)},toggle_showadvancedbodytags:function(e,t){this.themetool.cfg.showadvancedbodytags=t.get("checked")?!0:!1,M.util.set_user_preference("css_theme_tool_full_body_tags",this.themetool.cfg.showadvancedbodytags)},toggle_autosaveonchange:function(e,t){this.themetool.cfg.autosaveonchange=t.get("checked")?!0:!1,this.themetool.cfg.autosaveonchange?(this.themetool.nodes.savechangesbutton.addClass("autosaveenabled"),this.themetool.save_rules()):this.themetool.nodes.savechangesbutton.removeClass("autosaveenabled"),M.util.set_user_preference("css_theme_tool_auto_save_changes",this.themetool.cfg.autosaveonchange)},toggle_onlyviewmyrules:function(e,t){this.themetool.cfg.onlyviewmyrules=t.get("checked")?!0:!1,this.themetool.cfg.onlyviewmyrules&&this.themetool.fire("cssthemetool:changed"),M.util.set_user_preference("css_theme_tool_only_view_my_rules",this.themetool.cfg.onlyviewmyrules)}},e.extend(r,e.Base,r.prototype,{NAME:"moodle-block_css_theme_tool-csseditor-settings",ATTRS:{}}),e.augment(r,e.EventTarget),M.block_css_theme_tool.init_settings=function(e){return new r(e)}},"@VERSION@");
